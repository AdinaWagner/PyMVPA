From 900c4277b088ef5c912703e80d5840d957e02e10 Mon Sep 17 00:00:00 2001
From: Yaroslav Halchenko <debian@onerussian.com>
Date: Tue, 17 Oct 2017 20:28:30 -0400
Subject: [PATCH 1/2] BF: choose between imgmath and pngmath

---
 doc/source/conf.py | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/doc/source/conf.py b/doc/source/conf.py
index 528b360f..058bbfce 100644
--- a/doc/source/conf.py
+++ b/doc/source/conf.py
@@ -58,13 +58,20 @@ extensions = ['sphinx.ext.autodoc',
               'sphinx.ext.coverage',
               'sphinx.ext.ifconfig',
               'sphinx.ext.inheritance_diagram',
-              'sphinx.ext.pngmath',
               # we have a local copy of the extension, imported from NumPy 1.3
               # this also includes the docscrape* extensions
               externals.exists('numpydoc') and 'numpydoc.numpydoc' or 'sphinxext.numpydoc',
               # finally our own little thingie to display tasks
               'sphinxext.exercise_directive']
 
+# Things change across sphinx versions
+try:
+    import sphinx.ext.imgmath
+    extensions.append('sphinx.ext.imgmath')
+except ImportError:
+    import sphinx.ext.pngmath
+    extensions.append('sphinx.ext.pngmath')
+
 # we have a local copy of autosummary from the unreleased sphinx
 # 1.0 -- reason: the 0.6 extension creates half-empty summaries
 extensions += [sphinx_version < '1.1.2'
-- 
2.14.1

