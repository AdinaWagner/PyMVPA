From 7706ed1df15dfa215d9cc20daaa773aeae266884 Mon Sep 17 00:00:00 2001
From: Yaroslav Halchenko <debian@onerussian.com>
Date: Sun, 25 Dec 2011 12:35:44 -0500
Subject: [PATCH] BF: assure native endianness in
 test_assumptions_on_nibabel_behavior unittest

---
 mvpa2/tests/test_niftidataset.py |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/mvpa2/tests/test_niftidataset.py b/mvpa2/tests/test_niftidataset.py
index c9fb4c7..28f3270 100644
--- a/mvpa2/tests/test_niftidataset.py
+++ b/mvpa2/tests/test_niftidataset.py
@@ -354,7 +354,11 @@ def test_assumptions_on_nibabel_behavior(filename):
     ni = nb.load(masrc)
     hdr = ni.get_header()
     data = ni.get_data()
-    assert(hdr.get_data_dtype() == 'int16') # we deal with int file
+    # operate in the native endianness so that symbolic type names (e.g. 'int16')
+    # remain the same across platforms
+    if hdr.endianness == nb.volumeutils.swapped_code:
+        hdr = hdr.as_byteswapped()
+    assert_equal(hdr.get_data_dtype(), 'int16') # we deal with int file
 
     dataf = data.astype(float)
     dataf_dtype = dataf.dtype
-- 
1.7.6.3

